@{
    ViewData["Title"] = "Ticket Details";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<style>
    .ticket-header {
        background: linear-gradient(135deg, #008080, #006666);
        color: white;
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 25px;
    }

    .conversation-container {
        background: white;
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }

    .message-bubble {
        margin-bottom: 20px;
    }

    .message-bubble.customer {
        margin-left: 50px;
    }

    .message-bubble.support {
        margin-right: 50px;
    }

    .message-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 10px;
    }

    .message-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }

    .message-content-box {
        padding: 20px;
        border-radius: 16px;
        line-height: 1.7;
    }

    .message-bubble.customer .message-content-box {
        background: linear-gradient(135deg, #f0fdfa, #e0f2f1);
        border-left: 4px solid #008080;
    }

    .message-bubble.support .message-content-box {
        background: #f8f9fa;
        border-left: 4px solid #ff6b35;
    }

    .reply-box {
        background: white;
        border-radius: 16px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    }

    .reply-textarea {
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        padding: 15px;
        width: 100%;
        min-height: 120px;
        resize: vertical;
        font-size: 0.95rem;
        transition: all 0.3s;
    }

    .reply-textarea:focus {
        border-color: #008080;
        outline: none;
        box-shadow: 0 0 0 4px rgba(0,128,128,0.1);
    }

    .attachment-preview {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 15px;
        background: #f3f4f6;
        border-radius: 10px;
        margin-top: 15px;
    }

    .timeline-item {
        display: flex;
        gap: 15px;
        padding: 15px 0;
        border-bottom: 1px solid #f3f4f6;
    }

    .timeline-item:last-child {
        border-bottom: none;
    }

    .timeline-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-top: 5px;
        flex-shrink: 0;
    }

    .status-select {
        background: rgba(255,255,255,0.2);
        border: 1px solid rgba(255,255,255,0.3);
        color: white;
        padding: 8px 15px;
        border-radius: 10px;
        font-size: 0.9rem;
    }

    .status-select option {
        color: #1f2937;
    }
</style>

<!-- Breadcrumb -->
<nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb" style="background: none; padding: 0;">
        <li class="breadcrumb-item"><a href="/CustomerPortal/Support" style="color: #008080; text-decoration: none;">Support Center</a></li>
        <li class="breadcrumb-item"><a href="/CustomerPortal/MyTickets" style="color: #008080; text-decoration: none;">My Tickets</a></li>
        <li class="breadcrumb-item active" aria-current="page">TKT-2026-0045</li>
    </ol>
</nav>

<!-- Ticket Header -->
<div class="ticket-header">
    <div class="d-flex justify-content-between align-items-start flex-wrap gap-3">
        <div>
            <div class="d-flex align-items-center gap-3 mb-2">
                <span style="background: rgba(255,255,255,0.2); padding: 5px 12px; border-radius: 8px; font-size: 0.85rem;">TKT-2026-0045</span>
                <span style="background: #3b82f6; padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;">OPEN</span>
                <span style="background: #ef4444; padding: 5px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600;">üî¥ HIGH PRIORITY</span>
            </div>
            <h4 style="font-weight: 700; margin: 10px 0 5px;">Gaming headset not working after 2 weeks</h4>
            <p style="opacity: 0.9; margin: 0; font-size: 0.95rem;">Category: Product Defect ‚Ä¢ Order: ORD-2026-0892</p>
        </div>
        <div class="text-end">
            <div style="opacity: 0.8; font-size: 0.85rem;">Created</div>
            <div style="font-weight: 600;">Jan 18, 2026, 10:34 AM</div>
        </div>
    </div>
</div>

<div class="row g-4">
    <!-- Main Conversation -->
    <div class="col-lg-8">
        <div class="conversation-container">
            <h6 style="font-weight: 600; color: #1f2937; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #e5e7eb;">
                üí¨ Conversation Thread
            </h6>

            <!-- Initial Message -->
            <div class="message-bubble customer">
                <div class="message-header">
                    <div class="message-avatar" style="background: linear-gradient(135deg, #008080, #20b2aa); color: white;">JD</div>
                    <div>
                        <div style="font-weight: 600; color: #1f2937;">Juan Dela Cruz</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">Customer ‚Ä¢ Jan 18, 2026 at 10:34 AM</div>
                    </div>
                </div>
                <div class="message-content-box">
                    <p style="margin: 0;">Hi, I purchased a HyperX Cloud II gaming headset from your store about 2 weeks ago (Order #ORD-2026-0892). </p>
                    <p style="margin: 15px 0 0;">The headset was working fine initially, but yesterday the left ear cup suddenly stopped producing any sound. I've tried:</p>
                    <ul style="margin: 10px 0;">
                        <li>Connecting to different devices (PC, phone, laptop)</li>
                        <li>Using different audio cables</li>
                        <li>Checking audio balance settings</li>
                    </ul>
                    <p style="margin: 0;">None of these fixed the issue. The right ear cup works perfectly fine. This seems like a hardware defect. Can I get this replaced under warranty?</p>

                    <div class="attachment-preview">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#008080" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <span style="flex: 1;">headset_issue.jpg</span>
                        <a href="#" style="color: #008080; font-size: 0.85rem;">View</a>
                    </div>
                </div>
            </div>

            <!-- Support Response -->
            <div class="message-bubble support">
                <div class="message-header">
                    <div class="message-avatar" style="background: linear-gradient(135deg, #ff6b35, #ff8c42); color: white;">SC</div>
                    <div>
                        <div style="font-weight: 600; color: #1f2937;">Sarah Chen <span style="background: #fef3c7; color: #b45309; font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; margin-left: 8px;">SUPPORT AGENT</span></div>
                        <div style="font-size: 0.8rem; color: #6b7280;">Jan 18, 2026 at 11:15 AM</div>
                    </div>
                </div>
                <div class="message-content-box">
                    <p style="margin: 0;">Hello Juan!</p>
                    <p style="margin: 15px 0;">Thank you for reaching out to CompuGear Support. I'm sorry to hear that you're experiencing issues with your HyperX Cloud II headset.</p>
                    <p style="margin: 0;">Based on your description and the troubleshooting steps you've already taken, this does appear to be a hardware defect. The good news is that your purchase is still within the warranty period, so we can process a replacement for you.</p>
                    <p style="margin: 15px 0 0;">To proceed with the warranty claim, please provide:</p>
                    <ol style="margin: 10px 0 0;">
                        <li>A clear photo of the headset's serial number (usually on the headband)</li>
                        <li>Your original receipt or order confirmation email</li>
                    </ol>
                    <p style="margin: 15px 0 0;">Once I receive these, I'll initiate the replacement process right away.</p>
                </div>
            </div>

            <!-- Customer Reply -->
            <div class="message-bubble customer">
                <div class="message-header">
                    <div class="message-avatar" style="background: linear-gradient(135deg, #008080, #20b2aa); color: white;">JD</div>
                    <div>
                        <div style="font-weight: 600; color: #1f2937;">Juan Dela Cruz</div>
                        <div style="font-size: 0.8rem; color: #6b7280;">Customer ‚Ä¢ Jan 18, 2026 at 2:45 PM</div>
                    </div>
                </div>
                <div class="message-content-box">
                    <p style="margin: 0;">Hi Sarah, thank you for the quick response!</p>
                    <p style="margin: 15px 0 0;">I've attached the photo of the serial number and the order confirmation. Please let me know the next steps.</p>

                    <div class="attachment-preview">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#008080" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <span style="flex: 1;">serial_number.jpg</span>
                        <a href="#" style="color: #008080; font-size: 0.85rem;">View</a>
                    </div>
                    <div class="attachment-preview">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#008080" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/>
                        </svg>
                        <span style="flex: 1;">order_confirmation.pdf</span>
                        <a href="#" style="color: #008080; font-size: 0.85rem;">View</a>
                    </div>
                </div>
            </div>

            <!-- Awaiting Response Notice -->
            <div style="text-align: center; padding: 20px; background: #fef3c7; border-radius: 12px; margin-top: 20px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#b45309" stroke-width="2" style="margin-bottom: 10px;">
                    <circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>
                </svg>
                <p style="margin: 0; color: #92400e; font-weight: 500;">Awaiting support response. Average response time: 4-8 hours for high priority tickets.</p>
            </div>
        </div>

        <!-- Reply Box -->
        <div class="reply-box mt-4">
            <h6 style="font-weight: 600; color: #1f2937; margin-bottom: 15px;">
                ‚úèÔ∏è Add a Reply
            </h6>
            <textarea class="reply-textarea" placeholder="Type your message here..."></textarea>
            <div class="d-flex justify-content-between align-items-center mt-3">
                <div>
                    <button class="btn btn-outline-secondary btn-sm" style="border-radius: 10px;" onclick="document.getElementById('replyAttachment').click()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 5px;">
                            <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                        </svg>
                        Attach File
                    </button>
                    <input type="file" id="replyAttachment" style="display: none;">
                </div>
                <button class="btn" style="background: linear-gradient(135deg, #008080, #006666); color: white; border-radius: 10px; padding: 10px 25px; font-weight: 600;">
                    Send Reply
                </button>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="col-lg-4">
        <!-- Ticket Info -->
        <div class="portal-card mb-4">
            <h6 style="font-weight: 600; color: #1f2937; margin-bottom: 20px;">
                üìã Ticket Information
            </h6>

            <div class="mb-3">
                <div style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Status</div>
                <span style="background: #dbeafe; color: #1d4ed8; padding: 5px 15px; border-radius: 20px; font-size: 0.85rem; font-weight: 600;">Open</span>
            </div>

            <div class="mb-3">
                <div style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Priority</div>
                <span style="color: #ef4444; font-weight: 600;">üî¥ High</span>
            </div>

            <div class="mb-3">
                <div style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Category</div>
                <div style="font-weight: 500; color: #374151;">Product Defect</div>
            </div>

            <div class="mb-3">
                <div style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Assigned Agent</div>
                <div class="d-flex align-items-center gap-10">
                    <div style="width: 30px; height: 30px; background: linear-gradient(135deg, #ff6b35, #ff8c42); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 600;">SC</div>
                    <div style="font-weight: 500; color: #374151; margin-left: 10px;">Sarah Chen</div>
                </div>
            </div>

            <div>
                <div style="font-size: 0.8rem; color: #6b7280; margin-bottom: 5px;">Related Order</div>
                <a href="/CustomerPortal/OrderDetails?id=ORD-2026-0892" style="color: #008080; font-weight: 500; text-decoration: none;">ORD-2026-0892</a>
            </div>
        </div>

        <!-- Timeline -->
        <div class="portal-card mb-4">
            <h6 style="font-weight: 600; color: #1f2937; margin-bottom: 20px;">
                üìÖ Activity Timeline
            </h6>

            <div class="timeline-item">
                <div class="timeline-dot" style="background: #3b82f6;"></div>
                <div>
                    <div style="font-weight: 500; color: #1f2937; font-size: 0.9rem;">Customer replied</div>
                    <div style="font-size: 0.8rem; color: #6b7280;">Jan 18, 2:45 PM</div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="background: #ff6b35;"></div>
                <div>
                    <div style="font-weight: 500; color: #1f2937; font-size: 0.9rem;">Agent Sarah responded</div>
                    <div style="font-size: 0.8rem; color: #6b7280;">Jan 18, 11:15 AM</div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="background: #8b5cf6;"></div>
                <div>
                    <div style="font-weight: 500; color: #1f2937; font-size: 0.9rem;">Assigned to Sarah Chen</div>
                    <div style="font-size: 0.8rem; color: #6b7280;">Jan 18, 10:45 AM</div>
                </div>
            </div>

            <div class="timeline-item">
                <div class="timeline-dot" style="background: #10b981;"></div>
                <div>
                    <div style="font-weight: 500; color: #1f2937; font-size: 0.9rem;">Ticket created</div>
                    <div style="font-size: 0.8rem; color: #6b7280;">Jan 18, 10:34 AM</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="portal-card">
            <h6 style="font-weight: 600; color: #1f2937; margin-bottom: 20px;">
                ‚ö° Quick Actions
            </h6>

            <div class="d-grid gap-2">
                <button class="btn btn-outline-secondary" style="border-radius: 10px; text-align: left; padding: 12px 15px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 10px;">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    Edit Ticket Details
                </button>
                <button class="btn btn-outline-danger" style="border-radius: 10px; text-align: left; padding: 12px 15px;">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 10px;">
                        <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                    Close Ticket
                </button>
            </div>
        </div>
    </div>
</div>
